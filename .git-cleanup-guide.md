# Git History Cleanup Guide

This guide helps you prepare the FieldTest repository for production with a clean git history.

## Current Status

All refactoring and documentation work is complete:

- ✅ Branding updated from FKit to FieldTest
- ✅ MCP server renamed to fieldtest-mcp-server
- ✅ Biome integration with GritQL plugins
- ✅ Comprehensive documentation (guides, reference, explainers)
- ✅ Clean CHANGELOG for v1.0.0
- ✅ Updated README and contributing guidelines

## Option 1: Clean Slate (Recommended for Public Release)

Create a fresh initial commit with all current work:

```bash
# Stage all changes
git add -A

# Commit as v1.0.0 release
git commit -m "feat: FieldTest v1.0.0 - Unified validation toolkit

- Consolidated packages into @watthem/fieldtest
- Added Biome integration with custom GritQL plugins
- Complete documentation (guides, reference, explainers)
- MCP server for AI-powered workflows
- Framework integrations for Astro, Next.js, and more
- Migration guide from legacy packages

BREAKING CHANGE: All @fieldtest/* packages consolidated into @watthem/fieldtest"

# Tag the release
git tag -a v1.0.0 -m "FieldTest v1.0.0 - Initial public release"

# Optional: Create new orphan branch for clean history
git checkout --orphan clean-main
git add -A
git commit -m "feat: FieldTest v1.0.0 - Initial release"
git branch -D main
git branch -m main
```

## Option 2: Squash Recent Commits

If you want to preserve some history but clean up recent work:

```bash
# View commit history
git log --oneline -20

# Interactive rebase to squash commits
# Replace N with number of commits to squash
git rebase -i HEAD~N

# In the editor:
# - Keep first commit as 'pick'
# - Change others to 'squash' or 'fixup'
# - Save and exit

# Stage current changes
git add -A
git commit --amend -m "feat: FieldTest v1.0.0 refactoring and documentation

Complete refactoring with Biome integration and comprehensive docs"

# Tag the release
git tag -a v1.0.0 -m "FieldTest v1.0.0"
```

## Option 3: Keep Full History

If you want to maintain all commit history:

```bash
# Simply commit the current changes
git add -A
git commit -m "feat: complete FieldTest v1.0.0 refactoring

- Renamed fkit-mcp-server to fieldtest-mcp-server
- Added Biome integration with GritQL plugins
- Created comprehensive documentation structure
- Updated branding throughout codebase
- Cleaned up CHANGELOG for production"

# Tag the release
git tag -a v1.0.0 -m "FieldTest v1.0.0 - Production release"
```

## Before Pushing

1. **Review changes:**

   ```bash
   git status
   git diff --staged
   ```

2. **Test the package:**

   ```bash
   pnpm install
   pnpm build
   pnpm biome:check
   ```

3. **Update remote (if using clean history):**

   ```bash
   # WARNING: This will force push
   git push -f origin main
   git push origin v1.0.0
   ```

## After Cleanup

1. Delete this guide:

   ```bash
   rm .git-cleanup-guide.md
   git add .git-cleanup-guide.md
   git commit -m "chore: remove git cleanup guide"
   ```

2. Consider creating a GitHub release with:
   - Tag: v1.0.0
   - Title: "FieldTest v1.0.0 - Initial Public Release"
   - Description: Contents from CHANGELOG.md

## Notes

- **Force pushing** (`git push -f`) will rewrite history and affect collaborators
- Only use Option 1 (orphan branch) if this is a fresh public release
- Always backup before force pushing: `git branch backup-$(date +%Y%m%d)`
- Inform team members if rewriting shared history

## Recommended Approach

For a clean public v1.0.0 release, use **Option 1** with these steps:

```bash
# Create backup
git branch backup-before-cleanup

# Stage all changes
git add -A

# Commit as initial release
git commit -m "feat: FieldTest v1.0.0

TypeScript validation toolkit for markdown and Standard Schema.

Features:
- Unified @watthem/fieldtest package
- Standard Schema support
- Markdown processing with frontmatter
- Schema registry and management
- Framework integrations (Astro, Next.js, Remix, SvelteKit, Nuxt)
- Biome integration with custom GritQL plugins
- MCP server for AI workflows
- Comprehensive documentation

See CHANGELOG.md for full details."

# Tag the release
git tag -a v1.0.0 -m "FieldTest v1.0.0 - Initial public release"

# Push to remote
git push origin main
git push origin v1.0.0
```

This creates a clean, professional first commit for your public package release.
